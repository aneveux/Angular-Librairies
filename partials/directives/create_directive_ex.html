<div class="bloc-content text-content">
	<ul>
		<li>Create a directive called <i class="text-red">ConfirmClick</i>, which displays a confirm dialog
			box on an element click. The dialog message has to be configurable.</li>
	</ul>
		
<editor show-preview="true" show-tabs="true" height="280">
<file type="html" name="confirm.html">&lt;div ng-init="login='Bob'"&gt;
	&lt;button class="btn" ng-click="login=''"&gt;Reset login&lt;/button&gt;
	Login: {{login}}
&lt;/div&gt;
</file>
<file type="javascript" name="confirm.js">// Resets directive, otherwise changes won't apply.
application.compileProvider.resetDirective('confirmClick');
// Use angular.module('moduleName', [ ... ]).directive() instead.
application.compileProvider.directive('confirmClick', function () {
    return {
    };
});
</file>
</editor>

</div>

<!-- 
application.compileProvider.directive('confirmClick', ['$dialog', function($dialog) {
    return {
        restrict: 'A',
        link: function($scope, $elm, $attrs) {
            var button = $elm[0];
            
            var clickHandler = $attrs.ngClick;
            $attrs.ngClick = null;
            
            var confirmMsg = ($attrs.confirmClick == null | $attrs.confirmClick.length == 0) ? "Are you sure?" : $attrs.confirmClick;
            
        	button.onclick = function(event) {
        		var msgBox = $dialog.messageBox('Confirm', confirmMsg, [{label: 'OK', result: true},{label: 'Cancel', result: false}]);
                msgBox.open().then(function(result) {
                	if (result) {
                		$scope.$eval(clickHandler);
                	}
                });
            };
        }
    };
}]);
 -->